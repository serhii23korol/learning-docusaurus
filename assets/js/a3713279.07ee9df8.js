"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[588],{1989(e,s,n){n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>l,default:()=>a,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"deployment","title":"Deploying to GitHub Pages","description":"This site is deployed to GitHub Pages using GitHub Actions. Every push to the main branch automatically builds and publishes the site.","source":"@site/docs/deployment.md","sourceDirName":".","slug":"/deployment","permalink":"/learning-docusaurus/docs/deployment","draft":false,"unlisted":false,"editUrl":"https://github.com/serhii23korol/learning-docusaurus/docs/deployment.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Tutorial Intro","permalink":"/learning-docusaurus/docs/intro"},"next":{"title":"Agile Softwareentwicklung","permalink":"/learning-docusaurus/docs/project-management/agile-software-development"}}');var i=n(4848),r=n(8453);const o={},l="Deploying to GitHub Pages",d={},c=[{value:"How It Works",id:"how-it-works",level:2},{value:"Workflow File",id:"workflow-file",level:2},{value:"Docusaurus Configuration",id:"docusaurus-configuration",level:2},{value:"Repo Structure",id:"repo-structure",level:2},{value:"GitHub Repo Settings",id:"github-repo-settings",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function h(e){const s={a:"a",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"deploying-to-github-pages",children:"Deploying to GitHub Pages"})}),"\n",(0,i.jsxs)(s.p,{children:["This site is deployed to GitHub Pages using GitHub Actions. Every push to the ",(0,i.jsx)(s.code,{children:"main"})," branch automatically builds and publishes the site."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Live site:"})," ",(0,i.jsx)(s.a,{href:"https://serhii23korol.github.io/learning-docusaurus/",children:"https://serhii23korol.github.io/learning-docusaurus/"})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["You push changes to ",(0,i.jsx)(s.code,{children:"main"})]}),"\n",(0,i.jsxs)(s.li,{children:["GitHub Actions runs the workflow (",(0,i.jsx)(s.code,{children:".github/workflows/deploy.yml"}),")"]}),"\n",(0,i.jsxs)(s.li,{children:["It installs dependencies, builds the site, and pushes the output to the ",(0,i.jsx)(s.code,{children:"gh-pages"})," branch"]}),"\n",(0,i.jsxs)(s.li,{children:["GitHub Pages serves the site from the ",(0,i.jsx)(s.code,{children:"gh-pages"})," branch"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"workflow-file",children:"Workflow File"}),"\n",(0,i.jsxs)(s.p,{children:["Located at ",(0,i.jsx)(s.code,{children:".github/workflows/deploy.yml"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-yaml",children:"name: Deploy to GitHub Pages\n\non:\n  push:\n    branches:\n      - main\n\njobs:\n  deploy:\n    name: Deploy to GitHub Pages\n    runs-on: ubuntu-latest\n    permissions:\n      contents: write\n    steps:\n      - uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: 20\n          cache: npm\n\n      - name: Install dependencies\n        working-directory: ./my-website\n        run: npm ci\n\n      - name: Build website\n        working-directory: ./my-website\n        run: npm run build\n\n      - name: Deploy to GitHub Pages\n        uses: peaceiris/actions-gh-pages@v3\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          publish_dir: ./my-website/build\n"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"docusaurus-configuration",children:"Docusaurus Configuration"}),"\n",(0,i.jsxs)(s.p,{children:["The following fields in ",(0,i.jsx)(s.code,{children:"my-website/docusaurus.config.ts"})," are required for GitHub Pages to work correctly:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",children:'const config: Config = {\n  url: "https://serhii23korol.github.io",\n  baseUrl: "/learning-docusaurus/",\n  organizationName: "serhii23korol",\n  projectName: "learning-docusaurus",\n  deploymentBranch: "gh-pages",\n  trailingSlash: false,\n};\n'})}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsxs)(s.p,{children:["\u26a0\ufe0f ",(0,i.jsx)(s.strong,{children:"Important:"})," The ",(0,i.jsx)(s.code,{children:"baseUrl"})," must match your repo name exactly, including the leading and trailing slashes. Forgetting this will cause the site to load without styles or assets."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"repo-structure",children:"Repo Structure"}),"\n",(0,i.jsxs)(s.p,{children:["The Docusaurus project lives inside the ",(0,i.jsx)(s.code,{children:"my-website"})," subfolder, not at the root of the repo:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"learning-docusaurus/\n\u251c\u2500\u2500 .github/\n\u2502   \u2514\u2500\u2500 workflows/\n\u2502       \u2514\u2500\u2500 deploy.yml\n\u251c\u2500\u2500 my-website/         \u2190 Docusaurus project is here\n\u2502   \u251c\u2500\u2500 package.json\n\u2502   \u251c\u2500\u2500 docusaurus.config.ts\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 LICENSE\n\u2514\u2500\u2500 README.md\n"})}),"\n",(0,i.jsxs)(s.p,{children:["This is why ",(0,i.jsx)(s.code,{children:"working-directory: ./my-website"})," is set in the workflow steps."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"github-repo-settings",children:"GitHub Repo Settings"}),"\n",(0,i.jsx)(s.p,{children:"Two settings need to be configured once in the GitHub repo:"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"1. Workflow permissions"}),(0,i.jsx)(s.br,{}),"\n","Go to ",(0,i.jsx)(s.strong,{children:"Repo Settings \u2192 Actions \u2192 General \u2192 Workflow permissions"})," and enable ",(0,i.jsx)(s.strong,{children:"Read and write permissions"}),". Without this, the Action will fail with a 403 permission error when trying to push to ",(0,i.jsx)(s.code,{children:"gh-pages"}),"."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"2. GitHub Pages source"}),(0,i.jsx)(s.br,{}),"\n","Go to ",(0,i.jsx)(s.strong,{children:"Repo Settings \u2192 Pages"})," and set the branch to ",(0,i.jsx)(s.code,{children:"gh-pages"}),", folder ",(0,i.jsx)(s.code,{children:"/ (root)"}),". This must be done after the first successful Action run, since the ",(0,i.jsx)(s.code,{children:"gh-pages"})," branch is created automatically by the workflow."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Error"}),(0,i.jsx)(s.th,{children:"Cause"}),(0,i.jsx)(s.th,{children:"Fix"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"Could not read package.json"})}),(0,i.jsx)(s.td,{children:"Runner can't find the project \u2014 it's in a subfolder"}),(0,i.jsxs)(s.td,{children:["Add ",(0,i.jsx)(s.code,{children:"working-directory: ./my-website"})," to workflow steps"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"Permission denied (403)"})}),(0,i.jsx)(s.td,{children:"GitHub Actions lacks write access"}),(0,i.jsx)(s.td,{children:"Enable Read and write permissions in Settings \u2192 Actions"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Site loads but has no styles"}),(0,i.jsxs)(s.td,{children:["Wrong ",(0,i.jsx)(s.code,{children:"baseUrl"})," in config"]}),(0,i.jsxs)(s.td,{children:["Set ",(0,i.jsx)(s.code,{children:"baseUrl"})," to ",(0,i.jsx)(s.code,{children:"/learning-docusaurus/"})]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"README shows instead of site"}),(0,i.jsx)(s.td,{children:"Pages is serving from wrong branch"}),(0,i.jsxs)(s.td,{children:["Switch Pages source to ",(0,i.jsx)(s.code,{children:"gh-pages"})," in Settings \u2192 Pages"]})]})]})]})]})}function a(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453(e,s,n){n.d(s,{R:()=>o,x:()=>l});var t=n(6540);const i={},r=t.createContext(i);function o(e){const s=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);